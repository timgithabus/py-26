Проект 2 Pyarcade

1) Как играть

1.1) Запуск
- Убедись, что установлены Python и библиотека Arcade.
- Запусти игру командой:
  python main.py

Игра по умолчанию стартует в полноэкранном режиме (fullscreen). Если полноэкранный режим недоступен, будет использовано обычное окно

1.2) Главное меню
- Кнопка "НАЧАТЬ ИГРАТЬ" запускает игру с выбранным персонажем
- Кнопка "СМЕНА" открывает меню выбора персонажа
- Справа в главном меню показывается превью текущего выбранного героя

1.3) Экран выбора героя
- Справа: иконка выбранного героя, базовые характеристики (Урон/Защита/HP) и описание
- Кнопка "ВЫБРАТЬ ПЕРСОНАЖА" сохраняет выбор и возвращает в главное меню
- Горячие клавиши: Enter - выбрать, Esc - назад

1.4) Управление в игре
- Движение: WASD или стрелки
- Атака (основная): ЛКМ (стрельба снарядом героя)
- Скиллы: цифры 1-9 (если скилл выбран), либо клик по иконке скилла в HUD

1.5) Цель игры и прогресс
- Ты сражаешься с волнами врагов, собираешь опыт и повышаешь уровень
- На 50-й волне появляется босс
- На 100-й волне появляется главный босс
- Победа (WIN) засчитывается при убийстве главного босса (boss1.png)
- Если HP героя падает до 0: выводится GAME OVER, игра завершается и показывает статистику.


2) Что использовалось (стек)

2.1) Язык и версия
- Python 3.x (рекомендуется 3.10+)

2.2) Библиотеки
- arcade (PyArcade) 3.3.3:
  - окно и цикл игры (arcade.Window, arcade.run)
  - сцены/экраны через View (arcade.View)
  - спрайты и списки спрайтов (arcade.Sprite, arcade.SpriteList)
  - отрисовка текстур и примитивов (draw_texture_rect, draw_text, прямоугольники)
  - базовые проверки столкновений (arcade.check_for_collision)
- random:
  - спавн врагов/боссов в случайных местах
  - некоторые вероятности (например, шанс крита)
- math:
  - расстояния/нормализация векторов для полёта снарядов и движения врагов
  - углы поворота снарядов


3) Какие есть модули и за что отвечают

Проект специально сделан “в одном файле”, поэтому под “модулями” здесь имеются в виду:
- внешние Python-модули (arcade/random/math)

3.1) Файлы проекта
- main.py
  Главный модуль игры. Внутри: константы, загрузка ассетов, классы сущностей, меню, выбор героя, игровой цикл.
- images/
  Папка с текстурами (основной путь для всех картинок).
- INSTRUCTIONS.txt
  Краткая инструкция по проекту (может быть менее подробной, чем этот файл).

3.2) Ассеты и где они ожидаются
Игра в первую очередь ищет файлы в папке images/:
- images/map.png (фон/карта)
- images/hero1.png ... images/hero4.png (персонажи)
- images/bull.png (основная атака героя)
- images/skils(1).png ... images/skils(9).png (иконки скиллов)
- images/boss2.png (босс волны 50)
- images/boss1.png (главный босс волны 100)

3.3) Логические подсистемы в main.py

3.3.1) Константы и параметры баланса
В начале main.py определены размеры мира/экрана, параметры камеры, скорости снарядов, кулдауны, базовые значения HP/урона и т.д.
Это “панель настройки” проекта: меняя эти значения можно быстро сместить баланс в сторону “хардкорнее/легче”.

3.3.2) Сцены (Views)
Start_menu (arcade.View)
- Рисует главное меню: фон, кнопки "НАЧАТЬ ИГРАТЬ" и "СМЕНА", превью героя справа.
- По клику запускает игру (MyGame) или открывает выбор героя (HeroSelectView).

HeroSelectView (arcade.View)
- Экран выбора героя.
- Сохраняет выбранного героя обратно в Start_menu.

MyGame (arcade.View)
- Основная игровая сцена: карта, герой, враги, снаряды, опыт, HUD.
- Здесь происходит “всё важное”: спавн, урон, опыт, уровни, выбор скиллов, победа/поражение.

3.3.3) Игровые сущности (Sprite/Enemy)
Hero (arcade.Sprite)
- Игрок: HP/MaxHP, скорость, кулдаун атаки.
- Поддерживает отравление (poison): apply_poison() включает эффект, update_poison() тикает урон по времени.

EnemyBase (arcade.Sprite)
- Базовый класс для врагов:
  - HP/MaxHP
  - урон
  - скорость
  - радиус “тела” для раздвигания (collision_radius)
  - замедление (slow) и таймеры
  - логика выстрела (cooldown, флаг shooting)

Обычные враги:
- EnemiesPudge: ближний боец, идёт к цели и бьёт вблизи.
- FireArchers: дальник, держит дистанцию и стреляет FireArrow.
- WitchDoktor: дальник, стреляет WitchDoktorBullet и может накладывать пассивный урон.

Боссы:
- OrkBoss: босс 50-й волны (boss2.png), использует OrkBossBullet.
- BossDragon: главный босс 100-й волны (boss1.png), стреляет IceBall; победа считается только за него.

Снаряды:
- FireArrow: снаряд лучника.
- IceBall: снаряд дракона.
- WitchDoktorBullet: снаряд ведьмака (урон + poison).
- OrkBossBullet: снаряд орка.
- Bullet героя: основная атака, текстура images/bull.png (создаётся в MyGame при ЛКМ).

3.3.4) Камера
- В MyGame хранятся viewport_left / viewport_bottom.
- update_camera() плавно ведёт камеру за героем (LERP по CAMERA_LERP).
- В on_draw() мир рисуется со смещением: карта и спрайты учитывают offset = -viewport.

3.3.5) Волны, опыт, уровни
- Враги и боссы спавнятся “волнами”.
- За убийства выпадают “орбы опыта” (exp_list). При подборе растёт EXP.
- При переполнении EXP повышается уровень.
- Каждые 5 уровней: увеличивается MaxHP и растёт урон (процентный прирост).
- Каждый 10-й уровень (10, 20, 30, ...): открывается выбор скилла (пока не набрано MAX_SKILLS).

3.3.7) Скиллы (1..9) и иконки
Скиллы выбираются на уровнях кратных 10. После выбора они становятся доступными для активации:
- цифрами 1..9
- кликом по иконке в HUD

Коротко по логике скиллов:
1) Возрождение (одноразовое): при смерти срабатывает автоподъём (часть HP).
2) Хилл: при использовании сразу восстанавливает 50% MaxHP, плюс на время эффекта работает лечение за убийство.
3) Крит: шанс 35% увеличить урон основной атаки.
4) Молния: удар вокруг героя и обратный “возврат”, урон по врагам + замедление.
5) Аура: переключаемая (toggle) зона вокруг героя; включается/выключается повторным нажатием, действует с таймером и кулдауном.
6) Защита: временно снижает входящий урон.
7) Невидимость: враги перестают агриться (герой становится “не целью”).
8) Голем: призыв сущности в точке клика мышью (после активации скилла), может принимать урон.
9) Сброс кулдаунов: шанс “прокнуть” и обнулить кулдауны других активных скиллов.


4) Как этим пользоваться (если вы разработчик)

4.1) Где что менять
- Баланс (урон/HP/кулдауны/скорости): в константах вверху main.py.
- Спавн и волны: в логике MyGame (on_update и функции spawn_*).
- Скиллы: логика активации и эффектов находится в MyGame (по цифрам 1..9 + таймеры + отрисовка HUD).
- Текстуры: папка images/ и константа ASSET_DIR.

4.2) Типовой сценарий проверки после правок
- Запустить main.py и проверить:
  - меню -> смена -> выбор героя -> старт
  - движение и атака (ЛКМ)
  - получение EXP/уровня
  - выбор скилла на 10 уровне
  - спавн boss2 на 50 волне и boss1 на 100 волне

